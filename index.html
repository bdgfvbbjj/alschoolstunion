<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>IP Sender</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>

<script>
    const tg = window.Telegram.WebApp;

    async function sendIP() {
        const ip = await fetch("https://api.ipify.org?format=json")
            .then(r => r.json())
            .then(d => d.ip)
            .catch(() => null);

        if (!ip) {
            tg.sendData(JSON.stringify({ ip: null }));
            return;
        }

        tg.sendData(JSON.stringify({ ip: ip }));
    }

    tg.expand();
    sendIP();
</script>

</body>
</html>
