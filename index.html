<!DOCTYPE html>
<html>
<head>
  <title>Регистрация в Telegram</title>
</head>
<body>
<h2>Регистрация студента</h2>
<p>Подождите, идёт проверка IP...</p>

<script>
async function sendIP() {
    try {
        // Получаем IP пользователя
        const response = await fetch("https://api.ipify.org?format=json");
        const data = await response.json();
        const ip = data.ip;

        // Отправляем IP боту через Telegram Web App
        Telegram.WebApp.sendData(ip);

        // Закрываем Web App после отправки
        Telegram.WebApp.close();
    } catch (err) {
        console.error(err);
        document.body.innerHTML = "<p>Ошибка при получении IP. Попробуйте ещё раз.</p>";
    }
}

// Запускаем функцию при загрузке страницы
sendIP();
</script>
</body>
</html>
